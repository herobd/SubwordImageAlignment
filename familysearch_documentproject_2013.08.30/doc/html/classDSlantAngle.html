<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DSlantAngle Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>DSlantAngle Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="DSlantAngle" -->
<p><code>#include &lt;<a class="el" href="dslantangle_8h_source.html">dslantangle.h</a>&gt;</code></p>

<p><a href="classDSlantAngle-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDSlantAngle.html#a0afd212fb817db41471dc871cbf04f21">getTextlineSlantAngleDeg</a> (<a class="el" href="classDImage.html">DImage</a> &amp;imgBW, int <a class="el" href="dslantangle_8cpp.html#a7d52a1fb8455aa5bd8c49983ef7fbc56">rlThresh</a>, int x0=0, int y0=0, int x1=-1, int y1=-1, double *weight=NULL, unsigned int *rgSlantHist=NULL, <a class="el" href="classDImage.html">DImage</a> *imgAngleHist=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the slant angle for this black and white textline image.  <a href="#a0afd212fb817db41471dc871cbf04f21"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDSlantAngle.html#a45a36c2d85ccc13f6602a661a1091cdb">getAllTextlinesSlantAngleDeg</a> (<a class="el" href="classDImage.html">DImage</a> &amp;imgBW, int <a class="el" href="dslantangle_8cpp.html#a7d52a1fb8455aa5bd8c49983ef7fbc56">rlThresh</a>, <a class="el" href="classDRect.html">DRect</a> *rgTextlineRects, int numRects, int <a class="el" href="dthresholder_8cpp.html#aa84c6f4ba6f33ec1a17b3723fc593290">numThreads</a>=12, double *<a class="el" href="dslantangle_8cpp.html#a4f89a0d219d2389352ef086ab6a0b13a">rgAngles</a>=NULL, double *<a class="el" href="dslantangle_8cpp.html#ae7ffe4e5536644b095093afc8a69567c">rgWeights</a>=NULL)</td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a45a36c2d85ccc13f6602a661a1091cdb"></a><!-- doxytag: member="DSlantAngle::getAllTextlinesSlantAngleDeg" ref="a45a36c2d85ccc13f6602a661a1091cdb" args="(DImage &amp;imgBW, int rlThresh, DRect *rgTextlineRects, int numRects, int numThreads=12, double *rgAngles=NULL, double *rgWeights=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double DSlantAngle::getAllTextlinesSlantAngleDeg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDImage.html">DImage</a> &amp;&#160;</td>
          <td class="paramname"><em>imgBW</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rlThresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDRect.html">DRect</a> *&#160;</td>
          <td class="paramname"><em>rgTextlineRects</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numRects</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numThreads</em> = <code>12</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rgAngles</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rgWeights</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If rgAngles or rgWeights are non-NULL, they must be already allocated with enough space for numTextlines doubles. </p>

</div>
</div>
<a class="anchor" id="a0afd212fb817db41471dc871cbf04f21"></a><!-- doxytag: member="DSlantAngle::getTextlineSlantAngleDeg" ref="a0afd212fb817db41471dc871cbf04f21" args="(DImage &amp;imgBW, int rlThresh, int x0=0, int y0=0, int x1=&#45;1, int y1=&#45;1, double *weight=NULL, unsigned int *rgSlantHist=NULL, DImage *imgAngleHist=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double DSlantAngle::getTextlineSlantAngleDeg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDImage.html">DImage</a> &amp;&#160;</td>
          <td class="paramname"><em>imgBW</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rlThresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x0</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y0</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x1</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y1</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>weight</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>rgSlantHist</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDImage.html">DImage</a> *&#160;</td>
          <td class="paramname"><em>imgAngleHist</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate the slant angle for this black and white textline image. </p>
<p>The slant angle is assumed to be between 60 and -45 degrees (0 deg=vertical, negative values are left-slanted, positive values right-slanted). To determine slant: at each x-position, the longest runlength at each angle is found and its squared value is added into the accumulator for that angle. The histogram is smoothed, and the angle corresponding to the highest value in the histogram is the returned angle (in degrees).</p>
<p>Runlengths of less than rlThresh pixels are ignored.</p>
<p>The image should be black(0) and white(255). The portion of the image specified by x0,y0 - x1,y1 is considered to be the textline of interest. If no coordinates are specified, then the entire image is used as the textline.</p>
<p>If weight is not NULL, it will be the sum of max runlengths (not squared) at all 120 angles. Weights are used in determination of weighted average angle for all textlines in <a class="el" href="classDSlantAngle.html#a45a36c2d85ccc13f6602a661a1091cdb">getAllTextlinesSlantAngleDeg()</a> before adjusting angles.</p>
<p>If rgSlantHist is not NULL, the squared max RL values in the angle histogram will be copied into the rgSlantHist array. It must already be allocated to 120*sizeof(unsigned int).</p>
<p>if imgAngleHist is not NULL, then the image is set to w=120 and h=y1-y0+1. It is a (grayscale) graphical representation of what is in rgSlantHist. </p>

<p>References <a class="el" href="classDImage.html#a95c6ac047b16cd786c0333f22a9a2dc3">DImage::clear()</a>, <a class="el" href="classDImage.html#abd8a55f54bb0bd61b3fd26e8b21882de">DImage::create()</a>, <a class="el" href="classDImage.html#a79cdc4125e096c9f18dc0018741b2da1">DImage::dataPointer_u8()</a>, <a class="el" href="classDMath.html#a74a5b78f91bc8e8325423fda106da2f9">DMath::degreesToRadians()</a>, <a class="el" href="classDImage.html#a94407a62cc8af5eb6c2d43a10def9c9aafe64c3036cfcdfa8047bceaaaae63620">DImage::DImage_u8</a>, <a class="el" href="classDImage.html#add4b2e1cc4b96585f07a79e4e1445d82">DImage::drawLine()</a>, <a class="el" href="classDImage.html#ad69a2ccf4c66e7baaa0480a14629bc04">DImage::height()</a>, <a class="el" href="dslantangle_8cpp.html#a27c3fdeb6ed1662b891d9b36424fa000">rgSlantSums</a>, and <a class="el" href="classDImage.html#af1b5a59f0561381c59389fd5ec621900">DImage::width()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="dslantangle_8h_source.html">dslantangle.h</a></li>
<li><a class="el" href="dslantangle_8cpp.html">dslantangle.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Aug 30 2013 20:45:43 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
