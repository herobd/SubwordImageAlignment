<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DDynamicProgramming Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>DDynamicProgramming Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="DDynamicProgramming" -->
<p><code>#include &lt;<a class="el" href="ddynamicprogramming_8h_source.html">ddynamicprogramming.h</a>&gt;</code></p>

<p><a href="classDDynamicProgramming-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#a02b9a878af733fba4e49bb822051a26a">findDPAlignment</a> (const <a class="el" href="classDFeatureVector.html">DFeatureVector</a> &amp;fv1, const <a class="el" href="classDFeatureVector.html">DFeatureVector</a> &amp;fv2, int bandRadius, double bandCost=1000., double nonDiagonalCost=0., int *pathLen=NULL, int *rgPath=NULL, int *rgPrev=NULL, double *rgTable=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the DP alignment cost (and alignment if desired) between 2 feature vects.  <a href="#a02b9a878af733fba4e49bb822051a26a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classDImage.html">DImage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#a022ce4a3e35bb26ee2df5f00e6849993">piecewiseLinearWarpDImage</a> (<a class="el" href="classDImage.html">DImage</a> &amp;img1, int warpToLength, int pathLen, int *rgPath, bool fVertical)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classDImage.html">DImage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#aaa25aca86d6823d26f2219cec2435949">visualizeDPTable</a> (int *rgPrev, int Wa, int Wb, int bandRadius=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#a5f56be959ce814c399dec2e3518adba2">debugImages</a> (int Wa, int Wb, int pathLen, int *rgPath, int *rgPrev, double *rgTable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#aa8aa505e042797cb5b289ba4357ffb6f">getCoord0MappingsToCoord1</a> (int w0, int w1, double *rgCoords, int pathLen, int *rgPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#a60550bc8886b86882438b2050fd6fffe">getCoord1MappingsToCoord0</a> (int w1, double *rgCoords, int pathLen, int *rgPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDDynamicProgramming.html#a6561cd123e8d7a2cc3ee773e00579eee">checkBandCost</a> (int i, int j, int numRows, int numCols, int bandRadius, double bandCost=1000.)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">adds high cost to anything outside of Sakoe-Chiba band  <a href="#a6561cd123e8d7a2cc3ee773e00579eee"></a><br/></td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6561cd123e8d7a2cc3ee773e00579eee"></a><!-- doxytag: member="DDynamicProgramming::checkBandCost" ref="a6561cd123e8d7a2cc3ee773e00579eee" args="(int i, int j, int numRows, int numCols, int bandRadius, double bandCost=1000.)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double DDynamicProgramming::checkBandCost </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numRows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numCols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bandRadius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bandCost</em> = <code>1000.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>adds high cost to anything outside of Sakoe-Chiba band </p>

<p>Referenced by <a class="el" href="classDDynamicProgramming.html#a02b9a878af733fba4e49bb822051a26a">findDPAlignment()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f56be959ce814c399dec2e3518adba2"></a><!-- doxytag: member="DDynamicProgramming::debugImages" ref="a5f56be959ce814c399dec2e3518adba2" args="(int Wa, int Wb, int pathLen, int *rgPath, int *rgPrev, double *rgTable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DDynamicProgramming::debugImages </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Wa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Wb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pathLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPrev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rgTable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>References <a class="el" href="classDImage.html#a95c6ac047b16cd786c0333f22a9a2dc3">DImage::clear()</a>, <a class="el" href="classDImage.html#abd8a55f54bb0bd61b3fd26e8b21882de">DImage::create()</a>, <a class="el" href="ddefs_8h.html#a63373ce6abd19b1ce69cf45689f28cbe">D_CHECKPTR</a>, <a class="el" href="classDImage.html#a79cdc4125e096c9f18dc0018741b2da1">DImage::dataPointer_u8()</a>, <a class="el" href="classDImage.html#a94407a62cc8af5eb6c2d43a10def9c9aaf2420930e1d929ffa3a7237b7b4fcb2f">DImage::DImage_RGB</a>, <a class="el" href="classDImage.html#add4b2e1cc4b96585f07a79e4e1445d82">DImage::drawLine()</a>, <a class="el" href="classDImage.html#a5faefec809f5bd6fb6119c11e2aa3d2c">DImage::drawPixel()</a>, <a class="el" href="classDImage.html#aaf5529b0792fa982bbc0ab45cc2b32cc">DImage::fill()</a>, <a class="el" href="classDDynamicProgramming.html#aa8aa505e042797cb5b289ba4357ffb6f">getCoord0MappingsToCoord1()</a>, and <a class="el" href="classDImage.html#ab2882ac8cc6fc67cd1e5a89a4f078e26">DImage::save()</a>.</p>

</div>
</div>
<a class="anchor" id="a02b9a878af733fba4e49bb822051a26a"></a><!-- doxytag: member="DDynamicProgramming::findDPAlignment" ref="a02b9a878af733fba4e49bb822051a26a" args="(const DFeatureVector &amp;fv1, const DFeatureVector &amp;fv2, int bandRadius, double bandCost=1000., double nonDiagonalCost=0., int *pathLen=NULL, int *rgPath=NULL, int *rgPrev=NULL, double *rgTable=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double DDynamicProgramming::findDPAlignment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDFeatureVector.html">DFeatureVector</a> &amp;&#160;</td>
          <td class="paramname"><em>fv1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDFeatureVector.html">DFeatureVector</a> &amp;&#160;</td>
          <td class="paramname"><em>fv2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bandRadius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bandCost</em> = <code>1000.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>nonDiagonalCost</em> = <code>0.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pathLen</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPath</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPrev</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rgTable</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the DP alignment cost (and alignment if desired) between 2 feature vects. </p>
<p>This finds optimal alignment of fv1 to fv2 according to the Dynamic Time Warping algorithm used by Rath and Manmatha. Rath and Manmatha used 15 for bandRadius, so we calculate that a good value may be avgWordWidth / 11. If pathLen is set to not NULL, it will be filled with the length of the path. If rgPath is not NULL, it must already be allocated with enough space to hold any possible DP path (can just set it to (1+fv1.vectLen)*(1+fv2.vectLen) for convenience. The first pathLen slots will be filled with the left-to-right mapping as follows: 0=match (pixel columns aligned); 1=move pixel over a column in A but not B; 2=move pixel over a column in B but not A; Both rgPrev and rgTable are used locally and will be allocated/freed locally if NULL. If not NULL (for example if this function is being called a lot and you want to just reuse some memory), they must already be allocated to at least (1+fv1.vectLen)*(1+fv2.vectLen).</p>
<p>TODO: nonDiagonalCost is empirically chosen right now. The higher this cost, the more linear the DP warped will be because it makes it more costly to stretch or compress (go east or south) than to progress linearly through the DP table. </p>

<p>References <a class="el" href="classDDynamicProgramming.html#a6561cd123e8d7a2cc3ee773e00579eee">checkBandCost()</a>, <a class="el" href="ddefs_8h.html#a63373ce6abd19b1ce69cf45689f28cbe">D_CHECKPTR</a>, <a class="el" href="classDFeatureVector.html#a80e88e30e02ee03c151b0313d414b0d0">DFeatureVector::dimensions</a>, <a class="el" href="classDFeatureVector.html#a632c7bfaca71b1c98654c028b81b6868">DFeatureVector::fDataGroupedByDim</a>, <a class="el" href="classDFeatureVector.html#afa869a4bfaee87579f514c9b3639533b">DFeatureVector::fDataIsDouble</a>, <a class="el" href="classDFeatureVector.html#a0daa23fff40d79d0bb496cb96c291f0d">DFeatureVector::pDbl</a>, <a class="el" href="classDFeatureVector.html#a22469d41bf996ac648e7d5f7388324a3">DFeatureVector::pFlt</a>, and <a class="el" href="classDFeatureVector.html#a17cab52f6ddf1a9209fd15b909a86f35">DFeatureVector::vectLen</a>.</p>

<p>Referenced by <a class="el" href="classDMorphInk.html#a959b111d4929e7242b5edb781050d3e4">DMorphInk::resetMeshes()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8aa505e042797cb5b289ba4357ffb6f"></a><!-- doxytag: member="DDynamicProgramming::getCoord0MappingsToCoord1" ref="aa8aa505e042797cb5b289ba4357ffb6f" args="(int w0, int w1, double *rgCoords, int pathLen, int *rgPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DDynamicProgramming::getCoord0MappingsToCoord1 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rgCoords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pathLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fills rgCoords[x] with the mapping from x in fvect0 to x' in fvect1 Expects that rgCoords is already allocated to (w0+1)*sizeof(double) </p>

<p>Referenced by <a class="el" href="classDDynamicProgramming.html#a5f56be959ce814c399dec2e3518adba2">debugImages()</a>, and <a class="el" href="classDMorphInk.html#a959b111d4929e7242b5edb781050d3e4">DMorphInk::resetMeshes()</a>.</p>

</div>
</div>
<a class="anchor" id="a60550bc8886b86882438b2050fd6fffe"></a><!-- doxytag: member="DDynamicProgramming::getCoord1MappingsToCoord0" ref="a60550bc8886b86882438b2050fd6fffe" args="(int w1, double *rgCoords, int pathLen, int *rgPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DDynamicProgramming::getCoord1MappingsToCoord0 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rgCoords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pathLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fills rgCoords[x] with the mapping from x' in fvect1 to x in fvect0 Expects that rgCoords is already allocated to w1*sizeof(double) </p>

</div>
</div>
<a class="anchor" id="a022ce4a3e35bb26ee2df5f00e6849993"></a><!-- doxytag: member="DDynamicProgramming::piecewiseLinearWarpDImage" ref="a022ce4a3e35bb26ee2df5f00e6849993" args="(DImage &amp;img1, int warpToLength, int pathLen, int *rgPath, bool fVertical)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDImage.html">DImage</a> DDynamicProgramming::piecewiseLinearWarpDImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDImage.html">DImage</a> &amp;&#160;</td>
          <td class="paramname"><em>img1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>warpToLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pathLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fVertical</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function assumes that rgPath has been calculated on DFeatureVectors extracted from img1 and img2, respectively, and having the same length as the width (or height if fVertical is true) as img1 and img2. If a column is squished, then the min value of any column mapping to it is used. This function is mainly for debug. </p>

<p>References <a class="el" href="classDImage.html#abd8a55f54bb0bd61b3fd26e8b21882de">DImage::create()</a>, <a class="el" href="classDImage.html#a79cdc4125e096c9f18dc0018741b2da1">DImage::dataPointer_u8()</a>, <a class="el" href="classDImage.html#a94407a62cc8af5eb6c2d43a10def9c9aaf2420930e1d929ffa3a7237b7b4fcb2f">DImage::DImage_RGB</a>, <a class="el" href="classDImage.html#a94407a62cc8af5eb6c2d43a10def9c9aafe64c3036cfcdfa8047bceaaaae63620">DImage::DImage_u8</a>, <a class="el" href="classDImage.html#aaf5529b0792fa982bbc0ab45cc2b32cc">DImage::fill()</a>, <a class="el" href="classDColorSpace.html#a0ea05060677d130fa8c018ae4b2fca73">DColorSpace::getHSVFromRGB()</a>, <a class="el" href="classDImage.html#a5b4f998d5e2f38a18245e1190bfc5679">DImage::getImageType()</a>, <a class="el" href="classDImage.html#ad69a2ccf4c66e7baaa0480a14629bc04">DImage::height()</a>, and <a class="el" href="classDImage.html#af1b5a59f0561381c59389fd5ec621900">DImage::width()</a>.</p>

<p>Referenced by <a class="el" href="classDMorphInk.html#a959b111d4929e7242b5edb781050d3e4">DMorphInk::resetMeshes()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa25aca86d6823d26f2219cec2435949"></a><!-- doxytag: member="DDynamicProgramming::visualizeDPTable" ref="aaa25aca86d6823d26f2219cec2435949" args="(int *rgPrev, int Wa, int Wb, int bandRadius=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDImage.html">DImage</a> DDynamicProgramming::visualizeDPTable </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rgPrev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Wa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Wb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bandRadius</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ddynamicprogramming_8h_source.html">ddynamicprogramming.h</a></li>
<li><a class="el" href="ddynamicprogramming_8cpp.html">ddynamicprogramming.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Aug 30 2013 20:45:43 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
